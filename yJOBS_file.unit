#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                yJOBS.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               yJOBS_priv.h                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [0a/·]  (FILE) verify central file security                                0s   secure          yjobs_file_secure                                                            ((03.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                yjobs__unit_quiet                                                                                                                 i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char    x_tmp    [LEN_HUND]  = "/tmp";                                                                                                                                                                                           
     local    create working variable              - - - - - - - - - - - - -   char    x_dir    [LEN_HUND]  = "/tmp/lib/polymnia";                                                                                                                                                                              
     local    create working variable              - - - - - - - - - - - - -   char    x_world  [LEN_HUND]  = "world.ctrl";                                                                                                                                                                                     
     local    create working variable              - - - - - - - - - - - - -   char    x_db     [LEN_HUND]  = "polymnia.db";                                                                                                                                                                   
     local    create working variable              - - - - - - - - - - - - -   char    x_conf   [LEN_HUND]  = "eos.conf";                                                                                                                                                                      
     local    create working variable              - - - - - - - - - - - - -   char    x_file   [LEN_HUND]  = "";                                                                                                                                                                              

   COND  (0)  create testing files                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((13.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     prepare outputs                      - - - - - - - - - - - - -   yURG_msg_tmp (); yURG_msg_live ();  yURG_err_tmp ();  yURG_err_live ();                                                                                                                                                    
     exec     clear score                          yENV_score_clear                                                                                                                  i_equal     0                                                                                                    

   COND       create database                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((13.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create file name                     - - - - - - - - - - - - -   snprintf (x_file, LEN_HUND, "%s/%s", x_tmp, x_db);                                                                                                                                                                                                          
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  
     exec     ... create file                      yENV_touch                  x_file                                                    , "root"  , "root"  , "0600"                c_equal     'r'                                                                                                  
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/polymnia.db                               r  root        root        rw-------  ´                

   COND       verify quick success                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call force environment               yjobs__unit_environ         IAM_UPOLYMNIA, ACT_VAUDIT   , ""                                                                      i_equal     0                                                                                                    
     exec     call database secure                 yjobs_file_secure           IAM_UPOLYMNIA, ACT_VAUDIT   , "central database"    , "DSECURE" , "DFIX"    , x_tmp    , x_db         i_equal     1                                                                                                    
     get      ... check score                      yENV_score                                                                                                                        w_equal     åHEá pu a! ··- ····   SEá ···   LOá · ·· ···· ··   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬   CDá ···   DBá s·· ······   WOá ··· ····   ACá gn-   ¬¬¬¬¬¬¬¬¬¬¬¬¬   JDá ·  æ 
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/polymnia.db                               r  root        root        rw-------  ´                

   COND       verify expected output                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     verify messages output               yENV_lines                  YURG_MSG                                                                                              i_equal     10                                                                                                   
     exec     ... review line                      yENV_peek                   YURG_MSG          , 0                                                                                 s_equal                                                                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     audit existance and security of central database...                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested dir    4å/tmpæ                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested file  11åpolymnia.dbæ                                                                 
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- full name       16å/tmp/polymnia.dbæ                                                            
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- name (b/n) is fully qualified, not hidden/temp, and uses only legal characters                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- regular (r) entry existance confirmed, AND not a symlink/hardlink                               
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- ownership confirmed, owned by årootæ (0) and in group årootæ (0)                                
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- permissions confirmed, åf_tightæ, 0600, disp årw-------æ                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- success, central database exists and security is appropriate                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     (n/a)                                                                                                
     exec     verify error output                  yENV_lines                  YURG_ERR                                                                                              i_equal     0                                                                                                    
     exec     ... review line                      yENV_peek                   YURG_ERR          , 0                                                                                 s_equal     (n/a)                                                                                                

   COND       verify ignoring duplicate run                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database secure                 yjobs_file_secure           IAM_UPOLYMNIA, ACT_VAUDIT   , "central database"    , "DSECURE" , "DFIX"    , x_tmp    , x_db         i_equal     RC_ACK                                                                                               
     get      ... check score                      yENV_score                                                                                                                        w_equal     åHEá pu a! ··- ····   SEá ···   LOá · ·· ···· ··   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬   CDá ···   DBá s·· ······   WOá ··· ····   ACá gn-   ¬¬¬¬¬¬¬¬¬¬¬¬¬   JDá ·  æ 
     exec     verify messages output               yENV_lines                  YURG_MSG                                                                                              i_equal     10                                                                                                   

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((18.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       attempt on database with issues                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     update file                          yENV_touch                  x_file                                                    , "member", "users" , "0644"                c_equal     'r'                                                                                                  
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/polymnia.db                               r  member      users       rw-r--r--  ´                
     exec     call force environment               yjobs__unit_environ         IAM_UPOLYMNIA, ACT_VAUDIT   , ""                                                                      i_equal     0                                                                                                    
     exec     call database secure                 yjobs_file_secure           IAM_UPOLYMNIA, ACT_VAUDIT   , "central database"    , "DSECURE" , "DFIX"    , x_tmp    , x_db         i_lesser    0                                                                                                    
     get      ... check score                      yENV_score                                                                                                                        w_equal     åHEá pu a! ··- ····   SEá ···   LOá · ·· ···· ··   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬   CDá ···   DBá °·· ······   WOá ··· ····   ACá gn-   ¬¬¬¬¬¬¬¬¬¬¬¬¬   JDá f °æ 
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/polymnia.db                               r  member      users       rw-r--r--  ´                

   COND       check trouble                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     verify messages output               yENV_lines                  YURG_MSG                                                                                              i_equal     9                                                                                                    
     exec     ... review line                      yENV_peek                   YURG_MSG          , 0                                                                                 s_equal                                                                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     audit existance and security of central database...                                                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested dir    4å/tmpæ                                                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested file  11åpolymnia.dbæ                                                                 
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- full name       16å/tmp/polymnia.dbæ                                                              
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- name (b/n) is fully qualified, not hidden/temp, and uses only legal characters                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- regular (r) entry existance confirmed, AND not a symlink/hardlink                               
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal                                                                                                          
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, BOLD_ERR "FAILED, central database is not proper and/or secure, the reasons are shown above" BOLD_OFF);                                                                                                            
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     [[ u_error ]]                                                                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     (n/a)                                                                                                
     exec     verify error output                  yENV_lines                  YURG_ERR                                                                                              i_equal     3                                                                                                    
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, "  " BOLD_ERR "** FATAL, owned by åmemberæ (1000); BUT expected årootæ (0)" BOLD_OFF);                                                                                                
     exec     ... review line                      yENV_peek                   YURG_ERR          , 0                                                                                 s_equal     [[ u_error ]]                                                                                        
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, "  " BOLD_ERR "** FATAL, grouped in åusersæ (100); BUT expected årootæ (0)" BOLD_OFF);                                                                                                
     exec     ... review line                      yENV_peek                   YURG_ERR          , 'Ö'                                                                               s_equal     [[ u_error ]]                                                                                        
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, "  " BOLD_ERR "** FATAL, permissions åf_normalæ, 0644, disp årw-r--r--æ; BUT expected åf_tightæ, 0600, disp årw-------æ" BOLD_OFF);                                                                                                
     exec     ... review line                      yENV_peek                   YURG_ERR          , 'Ö'                                                                               s_equal     [[ u_error ]]                                                                                        
     exec     ... review line                      yENV_peek                   YURG_ERR          , 'Ö'                                                                               s_equal     (n/a)                                                                                                

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((18.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify fixing the database                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/polymnia.db                               r  member      users       rw-r--r--  ´                
     exec     call force environment               yjobs__unit_environ         IAM_UPOLYMNIA, ACT_VFIX     , ""                                                                      i_equal     0                                                                                                    
     exec     call database secure                 yjobs_file_secure           IAM_UPOLYMNIA, ACT_VFIX     , "central database"    , "DSECURE" , "DFIX"    , x_tmp    , x_db         i_equal     RC_POSITIVE                                                                                          
     get      ... check score                      yENV_score                                                                                                                        w_equal     åHEá pu f! ··- ····   SEá ···   LOá · ·· ···· ··   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬   CDá ···   DBá sf· ······   WOá ··· ····   ACá gn-   ¬¬¬¬¬¬¬¬¬¬¬¬¬   JDá ·  æ 
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/polymnia.db                               r  root        root        rw-------  ´                

   COND       verify expected output                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     verify messages output               yENV_lines                  YURG_MSG                                                                                              i_equal     11                                                                                                   
     exec     ... review line                      yENV_peek                   YURG_MSG          , 0                                                                                 s_equal                                                                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     audit existance and security of central database...                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested dir    4å/tmpæ                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested file  11åpolymnia.dbæ                                                                 
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- full name       16å/tmp/polymnia.dbæ                                                            
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- name (b/n) is fully qualified, not hidden/temp, and uses only legal characters                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- regular (r) entry updated successfully because of fix flag (y)                                
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- regular (r) entry existance confirmed, AND not a symlink/hardlink                               
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- ownership confirmed, owned by årootæ (0) and in group årootæ (0)                                
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- permissions confirmed, åf_tightæ, 0600, disp årw-------æ                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- success, central database exists and security is appropriate                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     (n/a)                                                                                                
     exec     verify error output                  yENV_lines                  YURG_ERR                                                                                              i_equal     1                                                                                                    
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, "  " BOLD_YEL "** warning, troubles with entry owner, group, perms" BOLD_OFF);                                                                                                                                         
     exec     ... review line                      yENV_peek                   YURG_ERR                      , 0                                                                     s_equal     [[ u_error ]]                                                                                        
     exec     ... review line                      yENV_peek                   YURG_ERR                      , 'Ö'                                                                   s_equal     (n/a)                                                                                                

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((18.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       create world                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((13.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create file name                     - - - - - - - - - - - - -   snprintf (x_file, LEN_HUND, "%s/%s", x_tmp, x_world);                                                                                                                                                                                                       
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  
     exec     ... create file                      yENV_touch                  x_file                                                    , "root"  , "root"  , "0600"                c_equal     'r'                                                                                                  
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/world.ctrl                                r  root        root        rw-------  ´                

   COND       verify world file sucess                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call force environment               yjobs__unit_environ         IAM_UPOLYMNIA, ACT_VAUDIT   , ""                                                                      i_equal     0                                                                                                    
     exec     call database secure                 yjobs_file_secure           IAM_UPOLYMNIA, ACT_VAUDIT   , "world file"          , "WSECURE" , "WFIX"    , x_tmp    , x_world      i_equal     1                                                                                                    
     get      ... check score                      yENV_score                                                                                                                        w_equal     åHEá pu a! ··- ····   SEá ···   LOá · ·· ···· ··   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬   CDá ···   DBá ··· ······   WOá s·· ····   ACá gn-   ¬¬¬¬¬¬¬¬¬¬¬¬¬   JDá ·  æ 
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/world.ctrl                                r  root        root        rw-------  ´                
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  

   COND       verify expected output                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     verify messages output               yENV_lines                  YURG_MSG                                                                                              i_equal     10                                                                                                   
     exec     ... review line                      yENV_peek                   YURG_MSG          , 0                                                                                 s_equal                                                                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     audit existance and security of world file...                                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested dir    4å/tmpæ                                                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested file  10åworld.ctrlæ                                                                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- full name       15å/tmp/world.ctrlæ                                                              
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- name (b/n) is fully qualified, not hidden/temp, and uses only legal characters                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- regular (r) entry existance confirmed, AND not a symlink/hardlink                               
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- ownership confirmed, owned by årootæ (0) and in group årootæ (0)                                
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- permissions confirmed, åf_tightæ, 0600, disp årw-------æ                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- success, world file exists and security is appropriate                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     (n/a)                                                                                                
     exec     verify error output                  yENV_lines                  YURG_ERR                                                                                              i_equal     0                                                                                                    
     exec     ... review line                      yENV_peek                   YURG_ERR          , 0                                                                                 s_equal     (n/a)                                                                                                

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((18.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       create conf file                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((13.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create file name                     - - - - - - - - - - - - -   snprintf (x_file, LEN_HUND, "%s/%s", x_tmp, x_conf);                                                                                                                                                                                                        
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  
     exec     ... create file                      yENV_touch                  x_file                                                    , "root"  , "root"  , "0600"                c_equal     'r'                                                                                                  
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/eos.conf                                  r  root        root        rw-------  ´                

   COND       verify central configuration file success                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call force environment               yjobs__unit_environ         IAM_UEOS     , ACT_VAUDIT   , ""                                                                      i_equal     0                                                                                                    
     exec     call database secure                 yjobs_file_secure           IAM_UEOS     , ACT_VAUDIT   , "central config"      , "FFSEC"   , "FFFIX"   , x_tmp    , x_conf       i_equal     1                                                                                                    
     get      ... check score                      yENV_score                                                                                                                        w_equal     åHEá eu a! ··- ····   SEá ···   LOá · ·· ···· ··   CFá e1 ·· s·· ····   ¬¬¬¬¬¬¬   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬   ¬¬¬¬¬¬¬¬¬¬¬¬   ACá -n-   ¬¬¬¬¬¬¬¬¬¬¬¬¬   JDá ·  æ 
     exec     ... check on file                    yENV_detail_unit            x_file                                                                                                s_equal     /tmp/eos.conf                                  r  root        root        rw-------  ´                
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  

   COND       verify expected output                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     verify messages output               yENV_lines                  YURG_MSG                                                                                              i_equal     10                                                                                                   
     exec     ... review line                      yENV_peek                   YURG_MSG          , 0                                                                                 s_equal                                                                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     audit existance and security of central config...                                                                
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested dir    4å/tmpæ                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested file   8åeos.confæ                                                                    
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- full name       13å/tmp/eos.confæ                                                              
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- name (b/n) is fully qualified, not hidden/temp, and uses only legal characters                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- regular (r) entry existance confirmed, AND not a symlink/hardlink                               
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- ownership confirmed, owned by årootæ (0) and in group årootæ (0)                                
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- permissions confirmed, åf_tightæ, 0600, disp årw-------æ                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- success, central config exists and security is appropriate                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     (n/a)                                                                                                
     exec     verify error output                  yENV_lines                  YURG_ERR                                                                                              i_equal     0                                                                                                    
     exec     ... review line                      yENV_peek                   YURG_ERR          , 0                                                                                 s_equal     (n/a)                                                                                                

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((18.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       attempt with missing file (in fix)                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  
     exec     call force environment               yjobs__unit_environ         IAM_UEOS     , ACT_VFIX     , ""                                                                      i_equal     0                                                                                                    
     exec     call database secure                 yjobs_file_secure           IAM_UEOS     , ACT_VFIX     , "central config"      , "FFSEC"   , "FFFIX"   , x_tmp    , x_conf       i_lesser    0                                                                                                    
     get      ... check score                      yENV_score                                                                                                                        w_equal     åHEá eu f! ··- ····   SEá ···   LOá · ·· ···· ··   CFá e1 ·· °-· ····   ¬¬¬¬¬¬¬   ¬¬¬¬¬¬¬¬¬¬¬¬¬¬   ¬¬¬¬¬¬¬¬¬¬¬¬   ACá -n-   ¬¬¬¬¬¬¬¬¬¬¬¬¬   JDá f °æ 

   COND       verify expected output                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     verify messages output               yENV_lines                  YURG_MSG                                                                                              i_equal     8                                                                                                    
     exec     ... review line                      yENV_peek                   YURG_MSG          , 0                                                                                 s_equal                                                                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     audit existance and security of central config...                                                                
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested dir    4å/tmpæ                                                          
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- requested file   8åeos.confæ                                                                    
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- full name       13å/tmp/eos.confæ                                                              
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     ¬¬-- name (b/n) is fully qualified, not hidden/temp, and uses only legal characters                  
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal                                                                                                          
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, BOLD_ERR "FAILED, central config is not proper and/or secure, the reasons are shown above" BOLD_OFF);                                                                                                            
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     [[ u_error ]]                                                                                        
     exec     ... review line                      yENV_peek                   YURG_MSG          , 'Ö'                                                                               s_equal     (n/a)                                                                                                
     exec     verify error output                  yENV_lines                  YURG_ERR                                                                                              i_equal     2                                                                                                    
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, "  " BOLD_YEL "** warning, troubles with entry non-existance" BOLD_OFF);                                                                                                                                         
     exec     ... review line                      yENV_peek                   YURG_ERR          , 0                                                                                 s_equal     [[ u_error ]]                                                                                        
     code     create error message                 - - - - - - - - - - - - -   strcpy (u_error, "  " BOLD_ERR "** FATAL, regular (r) requested creation (y) requires any force (!y), but used (-)" BOLD_OFF);                                                                                                
     exec     ... review line                      yENV_peek                   YURG_ERR          , 'Ö'                                                                               s_equal     [[ u_error ]]                                                                                        
     exec     ... review line                      yENV_peek                   YURG_ERR          , 'Ö'                                                                               s_equal     (n/a)                                                                                                

   COND       clean-up                                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((13.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     create file name                     - - - - - - - - - - - - -   snprintf (x_file, LEN_HUND, "%s/%s", x_tmp, x_db);                                                                                                                                                                                                          
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  
     code     create file name                     - - - - - - - - - - - - -   snprintf (x_file, LEN_HUND, "%s/%s", x_tmp, x_world);                                                                                                                                                                                                          
     exec     ... remove file                      yENV_rm                     x_file                                                                                                c_equal     '-'                                                                                                  

   COND       wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap up                              yjobs__unit_end                                                                                                                   i_equal     0                                                                                                    







# end-of-file.  done, finito, completare, whimper [Ï´···
